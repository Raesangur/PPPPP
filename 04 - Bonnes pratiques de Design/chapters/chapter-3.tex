%!TEX root = ../main.tex 

\section{Bonnes pratiques de schéma}

\begin{frame}{Rôle du schéma}
    \begin{itemize}
        \item \textbf{Tout devrait être dans le schéma électrique}
        \item C'est un outil et un document de référence pour \textit{tout le monde}
        \begin{itemize}
            \item Layout
            \item Programmation
            \item Assemblage
            \item Surtout, un outil de debugging
        \end{itemize}
        \item Un bon schéma contient toute l'information nécessaire pour faire ces tâches
        \item En mettre plus que pas assez
        \bigskip
        \item Tu ne devrais pas avoir à ouvrir une datasheet pour comprendre un schéma
    \end{itemize}
\end{frame}

\subsection{Clareté}

\begin{frame}{Règles de base - Flow du schéma}
    \begin{itemize}
        \item \textbf{Mettre les inputs à gauche et les outputs à droite}
        \begin{itemize}
            \item Le schéma devrait "flow" naturellement
            \item Devraient bien se faire si les symboles sont bien faits
        \end{itemize}
        \bigskip
        \item \textbf{Faire des groupes ou "modules" avec des fonctionalités distinctes}
        \begin{itemize}
            \item Bien indiquer les sections
            \item Les sections devraient aussi flow de gauche à droite
            \item Prendre de l'espace lorsque nécessaire
        \end{itemize}
        \bigskip
        \item \textbf{Prendre de l'espace lorsque nécessaire}
        \begin{itemize}
            \item Laisser le schéma respirer
            \item Laisser la place pour du texte
            \item Mettre le découplage à part
        \end{itemize}
    \end{itemize}
\end{frame}

\begin{frame}{Règles de base - Outils de schéma}
    \begin{itemize}
        \item \textbf{Toujours travailler sur une grille}
        \begin{itemize}
            \item Toujours garder la même taille de grille
            \item Je recommande 100\,mils
        \end{itemize}
        \bigskip
        \item \textbf{Éviter des longues traces qui passent au travers du schéma}
        \begin{itemize}
            \item Utiliser des net names
            \item Mettre les parties du schéma en sections
            \item Regrouper des groupes de plusieurs nets en bus
        \end{itemize}
        \bigskip
        \item \textbf{Rentre le schéma le plus lisible possible}
        \begin{itemize}
            \item Laisser le schéma respirer
            \item Éviter tous les croisements
            \item Aligner tout ce qui est alignable
            \item Pas de GND dans les airs; pas de VCC sur le côté
        \end{itemize}
    \end{itemize}
\end{frame}

\begin{frame}{Nets}
    \begin{itemize}
        \item \textbf{Utiliser des noms de nets clairs sur les connexions importantes}
        \begin{itemize}
            \item Aide le layout
            \item Indique la fonctionalité des connexions
            \item Permet de séparer une page en sous-blocs
        \end{itemize}
        \bigskip
        \item \textbf{Utiliser les types de nets}
        \begin{itemize}
            \item Local Net Labels \faLongArrowAltRight~Entre les sous-blocs
            \item Global Net Labels \faLongArrowAltRight~Apparaît sur le diagramme hiérarchique, connecte les pages
            \item Power Labels \faLongArrowAltRight~Pour toutes les connexions au PDN
        \end{itemize}
        \bigskip
        \item Utiliser des net classes
        \begin{itemize}
            \item Indications pour les design rules
        \end{itemize}
        \item Mettre des couleurs sur les nets
        \begin{itemize}
            \item Code de couleurs sur le PDN
        \end{itemize}
    \end{itemize}
\end{frame}

\begin{frame}{Modèle Hiérarchique}
    \begin{twocolumns}
        \leftcol
        \begin{itemize}
            \item Possible de tout mettre sur une page
            \item Mieux de séparer les fonctionalités par pages
            \item Sous-fonctionalités dans des sous-blocs
            \bigskip
            \item Page hiérarchique contient les plus grosses interconnexion
            \item Permet de répéter plusieurs fois un module similaire
            \bigskip
            \item Code de couleur
            \item Nom représentatifs
            \item Inputs à gauche, outputs à droite
        \end{itemize}

        \rightcol
        \makefigure{s7-app1-p3}
    \end{twocolumns}
\end{frame}


\begin{frame}[plain]
    \only<1>{
        \makefigure[1][1]{s7-app1-p14}
    }
    \only<2>{
        \makefigure[1][1]{s7-app1-p14-main}
    }
    \only<3>{
        \makefigure[1][1]{s7-app1-p14-modules}
    }
\end{frame}


\subsection{Notes}

\begin{frame}{Schémas blocs}
    \begin{itemize}
        \item \textbf{Le schéma électrique devrait contenir des schémas-blocs}
        \item Schémas comme au chapitre 1
        \bigskip
        \item Draw.io intégré dans le schéma électrique
        \item Utiliser les blocs hiérarchique comme schéma-bloc!
    \end{itemize}
    \vfill
    \makefigure[1][0.45]{haptic-board-block-diagram}
\end{frame}

\begin{frame}{Notes générales}
    \begin{twocolumns}[0.55]
        \leftcol
        \begin{itemize}
            \item Notes pour l'assemblage et le placement
            \item Notes pour tous les calculs
            \item Extraits pertinents de datasheet (avec p\#)
            \item Configurations choisies
            \item Addresses de chips, modes de contrôle
            \item Courbes et graphiques
            \item Informations sur les pins (configuration etc.)
        \end{itemize}
        \vspace{-6pt}
        \makefigure[1][0.33]{s7-app1-p12-thermal}
        \rightcol
        \vspace{-12pt}
        \makefigure{s7-app1-p2-notes}
    \end{twocolumns}
\end{frame}

\begin{frame}[plain]
    \only<1>{
    \makefigure[1][1]{s7-app1-p10}
    }
    \only<2>{
    \makefigure[1][1]{s7-app1-p10-adc}
    }
\end{frame}

\begin{frame}{Power}
    \begin{twocolumns}[0.66]
        \leftcol
        \begin{itemize}
            \item \textbf{Calculer le power pour chaque bloc / chaque page}
            \begin{itemize}
                \item Très important pour le design du PDN
            \end{itemize}
            \item Indiquer les courbes d'efficacité des régulateurs
            \item Indiquer les courbes d'impédance du découplage des chips
        \end{itemize}
        \rightcol
        \makefigure[0.9]{s7-app1-p10-power}
    \end{twocolumns}
    \vfill
    \makefigure[1][0.45]{s7-app1-p5-oscillator}
\end{frame}

\begin{frame}[plain]
    \only<1>{
    \makefigure[1][1]{s7-app1-p20}
    }
    \only<2>{
    \makefigure[1][1]{s7-app1-p20-3v3}
    }
    \only<3>{
    \makefigure[1][1]{s7-app1-p20-powerup}
    }
\end{frame}

\begin{frame}{Texte}
    \begin{twocolumns}[0.8]
        \leftcol
        \begin{itemize}
            \item Indiquer les informations pertinentes sur les composantes
            \begin{itemize}
                \item Tolérances
                \item Packages
                \item Types
                \item Puissance
                \item Part \#
            \end{itemize}
            \item Essayer de toujours garder tout le texte horizontal
            \item Tous les noms de nets et de pièces en MAJUSCULES
            \item Donner des noms aux testpoints, boutons, switches, LEDs, connecteurs...
        \end{itemize}

        \rightcol
        \vspace{-24pt}
        \makefigure[1][0.25]{s7-app1-p14-passive}
        \makefigure[1][0.55]{s7-app1-p14-passives}
    \end{twocolumns}
\end{frame}

\subsection{Testpoints et Debugging}
% Valider les boot sequences & power-sequence
% Se servir des pins flottantes
%  - Ajouter IO, LED, Testpoint, UART
% Mettre des systèmes de mesure de courant
% Met toujours plus de testpoints qu'on pense
%  - Différents types de testpoints
% Donner des noms aux testpoints

\subsection{Outils}
% Les 0R sont tes amis
%  - Peut remplacer une ferrite ou une shunt
%  - Pins EN et CFG
%  - Solder Bridge Pads
% Pull-ups / Pull-downs pour des pins de configuration
% Utiliser plusieurs pages / Faire un schéma hiérarchique
% Utiliser les Net Classes

\subsection{Autre}
% Toujours mettre des protections
%  - ESD
%  - Power
% Une connection I2C inter-board; mettre des pull-ups sur les deux boards
% Export ton schematic en PDF pour l'ouvrir sans logiciel
% 0.1µF

\subsection{Design Review}
% Faire réviser par quelqu'un d'autre après
% Passer le DRC / ERC
% Pour chaque composante:
%  - Valider le footprint
%  - Valider le symbole
%    - Numéros de pins selon la pièce choisie dans le BOM
%  - Valider chacune des connections en retournant vérifier dans la datasheet
%    - Est-ce que je suis au bon niveau de tension?
%    - Est-ce que j'ai besoin de pull-ups / pull-downs / autres passives
%  - Valider le découplage selon les fréquences
%  - Est-ce que le schéma est facilement lisible?
% Faire une review du BOM
%  - Est-ce que j'ai des erreurs de copier-coller?
%  - Est-ce que j'ai le bon modèle de pièce dans le BOM?
%    - Version SOIC vs version QFN
%    - Version pour un autre niveau de tension
%    - Version qui vient dans un paquet de 1000 au minimum
%  - Est-ce que j'ai toutes mes pièces mécaniques dans le BOM (standoffs, vis, washer, nut, heatsinks)
% Valider le debugging
%  - Est-ce que j'ai assez de testpoints (+ de GND!)
%  - Est-ce que j'ai des ports de debug sur mon MCU/FPGA
%  - Est-ce que j'ai des 0R pour ma configuration?
% Revalider tous les calculs
%  - Trucs changent pendant le design et ne sont pas toujours mis à jour
%  - Diviseurs de tension
%  - Dimentionnement des pièces
