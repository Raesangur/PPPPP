%!TEX root = ../main.tex 

\section{Comment conçevoir un arbre d'alimentation?}

\subsection{Déterminer les besoins}

\begin{frame}{Tensions d'opération}
    \begin{itemize}
        \item Chaque puce a une tension d'opération
        \item Parfois plusieurs tensions possible ($\SI{3.3}{\volt}$ jusqu'à $\SI{5}{\volt}$)
        \item Parfois plusieurs tensions nécessaires!
        \bigskip
        \item Parfois les puces peuvent avoir des IO à des tensions différentes
    \end{itemize}
\end{frame}

\begin{frame}{Courant d'opération}
    \begin{columns}
        \only<2> {
            \begin{column}{0.55\textwidth}
        }
        \only<1, 3> {
            \begin{column}{0.66\textwidth}
        }
            \begin{itemize}
                \item Pour chaque puce, à sa tension d'opération, récupérer:
                \begin{itemize}
                    \item Le courant minimal (sleep)
                    \item Le courant normal d'opération
                    \item Le courant maximal d'opération
                \end{itemize}
                \item Parfois tout le même
                \only<2-> {
                    \bigskip
                    \item Conçevoir circuit pour pouvoir passer le courant maximal
                    \item Choisir régulateurs pour avoir efficacité maximale au courant nominal
                }
                \only<3> {
                    \bigskip
                    \item Aussi rassembler tous les courants autres
                    \begin{itemize}
                        \item Moteurs
                        \item LEDs et affichage
                        \item Connecteurs et sous-cartes
                    \end{itemize}
                }
            \end{itemize}
        \end{column}
        
        \only<2> {
        \begin{column}{0.45\textwidth}
            \begin{figure}
                \includegraphics<2>[width=\textwidth, height=0.75\textheight, keepaspectratio]{pictures/switching-efficiency-curve.png}
            \end{figure}
        \end{column}
        }
        \only<1, 3> {
        \begin{column}{0.33\textwidth}
            \begin{figure}
                \includegraphics<3>[width=\textwidth, height=0.75\textheight, keepaspectratio]{pictures/switching-efficiency-curve.png}
            \end{figure}
        \end{column}
        }
    \end{columns}
\end{frame}

\begin{frame}{Besoins en stabilité}
    \begin{itemize}
        \item Déterminer les besoins de chaque puce en stabilité
        \item Quel est le $\Delta V$ maximum tolérable pour l'opération de la puce
        \item Quelle est la précision nécessaire pour une puce analogique
        \item À quel point un $\Delta V$ peut introduire un $\Delta f$ pour la fréquence?
    \end{itemize}

    \begin{columns}
        \begin{column}{0.5\textwidth}
            \only<2-> {
            \begin{itemize}
                \item Toujours mieux de quantifier
                \item \textbf{Permet de déterminer type de régulateur}
            \end{itemize}
            }
        \end{column}
        \begin{column}{0.5\textwidth}
            \begin{figure}
                \includegraphics[width=\textwidth, height=0.45\textheight, keepaspectratio]{pictures/eye-diagram.png}
            \end{figure}
        \end{column}
    \end{columns}
\end{frame}


\subsection{Bilan d'alimentation}

\begin{frame}{Bilan d'alimentation - Example - Alimentation 12V}
    \centering
    \Large
    \renewcommand{\arraystretch}{1.2}
    \vspace{-6pt}

    \begin{tabular}{>{\color{UDSgreenSolidarite}}c l | l | l | l | l | l}
    \rowcolor{UDSgreenSolidarite}
    & \textcolor{white}{\textbf{IC}}
    & \textcolor{white}{\textbf{Tension}}
    & \textcolor{white}{\textbf{I min}}
    & \textcolor{white}{\textbf{I nom}}
    & \textcolor{white}{\textbf{I max}} 
    & \textcolor{white}{\textbf{Type}}\\
    \hline
    \textcolor{UDSgreenFierte}{\faMicrochip} &
        \textbf{IC 1} &
        $\SI{3.3}{\volt}$ &
        $\SI{10}{\micro\ampere}$ &
        $\SI{17.5}{\milli\ampere}$ &
        $\SI{17.5}{\milli\ampere}$ &
        Digital\\
    \textcolor{UDSgreenFierte}{\faMicrochip} &
        \textbf{IC 2} &
        $\SI{3.3}{\volt}$ &
        $\SI{10}{\milli\ampere}$ &
        $\SI{10}{\milli\ampere}$ &
        $\SI{10}{\milli\ampere}$ &
        Digital\\
    & \hspace{16pt}\raisebox{10pt}{\rotatebox{-90}{\faLevelUp*}} &
        $\SI{3.3}{\volt}$ &
        $\SI{0}{\micro\ampere}$ &
        $\SI{10}{\milli\ampere}$ &
        $\SI{50}{\milli\ampere}$ &
        Analog\\
    \textcolor{UDSgreenFierte}{\faMicrochip} &
        \textbf{IC 3} &
        $\SI{2.5}{\volt}$ &
        $\SI{20}{\milli\ampere}$ &
        $\SI{20}{\milli\ampere}$ &
        $\SI{50}{\milli\ampere}$ &
        Analog\\
    \textcolor{UDSgreenFierte}{\faLightbulb} &
        \textbf{LEDs} &
        $\SI{5}{\volt}$ &
        $\SI{0}{\ampere}$ &
        $\SI{80}{\milli\ampere}$ &
        $\SI{80}{\milli\ampere}$ &
        Digital\\
    \textcolor{UDSgreenFierte}{\faUsb} &
        \textbf{USB} &
        $\SI{5}{\volt}$ &
        $\SI{0}{\ampere}$ &
        $\SI{100}{\milli\ampere}$ &
        $\SI{500}{\milli\ampere}$ &
        Digital\\
    \textcolor{UDSgreenFierte}{\faFan} &
        \textbf{Stepper} &
        $\SI{12}{\volt}$ &
        $\SI{0}{\ampere}$ &
        $\SI{300}{\milli\ampere}$ &
        $\SI{750}{\milli\ampere}$ &
        Digital\\
    \hline
    \textcolor{UDSgreenFierte}{\boldmath$\Sigma$} & \textbf{Total} & &
        \textbf{\boldmath$\SI{30.01}{\milli\ampere}$} &
        \textbf{\boldmath$\SI{537.5}{\milli\ampere}$} &
        \textbf{\boldmath$\SI{1457.5}{\milli\ampere}$} & \\
    \end{tabular}
\end{frame}

\begin{frame}{Bilan d'alimentation - Example - Alimentation 12V}
    \centering
    \Large
    \renewcommand{\arraystretch}{1.2}
    \vspace{-6pt}

    \begin{tabular}{>{\color{UDSgreenSolidarite}}c l | l | l | l}
    \rowcolor{UDSgreenSolidarite}
    & \textcolor{white}{\textbf{IC}}
    & \textcolor{white}{\textbf{Tension}}
    & \textcolor{white}{\textbf{I max}} 
    & \textcolor{white}{\textbf{Type}}\\
    \hline
    \textcolor{UDSgreenFierte}{\faMicrochip} &
        \textbf{IC 1} &
        $\SI{3.3}{\volt}$ &
        $\SI{17.5}{\milli\ampere}$ &
        Digital\\
    \textcolor{UDSgreenFierte}{\faMicrochip} &
        \textbf{IC 2} &
        $\SI{3.3}{\volt}$ &
        $\SI{10}{\milli\ampere}$ &
        Digital\\
    & \hspace{16pt}\raisebox{10pt}{\rotatebox{-90}{\faLevelUp*}} &
        $\SI{3.3}{\volt}$ &
        $\SI{50}{\milli\ampere}$ &
        Analog\\
    \textcolor{UDSgreenFierte}{\faMicrochip} &
        \textbf{IC 3} &
        $\SI{2.5}{\volt}$ &
        $\SI{50}{\milli\ampere}$ &
        Analog\\
    \textcolor{UDSgreenFierte}{\faLightbulb} &
        \textbf{LEDs} &
        $\SI{5}{\volt}$ &
        $\SI{80}{\milli\ampere}$ &
        Digital\\
    \textcolor{UDSgreenFierte}{\faUsb} &
        \textbf{USB} &
        $\SI{5}{\volt}$ &
        $\SI{500}{\milli\ampere}$ &
        Digital\\
    \textcolor{UDSgreenFierte}{\faFan} &
        \textbf{Stepper} &
        $\SI{12}{\volt}$ &
        $\SI{750}{\milli\ampere}$ &
        Digital\\
    \hline
    \textcolor{UDSgreenFierte}{\boldmath$\Sigma$} & \textbf{Total} & &
        \textbf{\boldmath$\SI{1457.5}{\milli\ampere}$} & \\
    \end{tabular}
\end{frame}

\begin{frame}{Diagramme d'alimentation}
    \centering
    \resizebox{\textwidth}{!}{
    \begin{tikzpicture}[
        block/.style = {rectangle, draw,
        minimum height=0.75cm,
        minimum width=2cm,
        align=center,
        very thick,
        rounded corners=0.1cm},
        node distance=0.8cm and 0.6cm,
        >={Stealth[round]},
        x = 2.5cm,
        y = 1cm
    ]

    \node(inlabel) at (0, 0) {};

    \node[block] (prot) at (0.5, 0)
        {\textcolor{UDSgreenFierte}{\faShield*} ~\textcolor{black}{Protections}};
    \node[block] (step) at (5,   0)
        {\textcolor{UDSgreenFierte}{\faFan} ~\textcolor{black}{Stepper}};
    \node[block] (5v)   at (2,  -1)
        {\textcolor{UDSgreenFierte}{\faWaveSquare} ~\textcolor{black}{\SI{5}{\volt}}};
    \node[block] (led)  at (5,  -1)
        {\textcolor{UDSgreenFierte}{\faLightbulb} ~\textcolor{black}{LED}};
    \node[block] (usb)  at (5,  -2)
        {\textcolor{UDSgreenFierte}{\faUsb} ~\textcolor{black}{USB}};
    \node[block] (3v3)  at (2,  -3)
        {\textcolor{UDSgreenFierte}{\faWaveSquare} ~\textcolor{black}{\SI{3.3}{\volt}}};
    \node[block] (3v3a) at (3.33,  -5)
        {\textcolor{UDSgreenFierte}{\faSync} ~\textcolor{black}{Ferrite}};
    \node[block] (ic1)  at (5,  -3)
        {\textcolor{UDSgreenFierte}{\faMicrochip} ~\textcolor{black}{IC 1}};
    \node[block] (ic2)  at (5,  -4)
        {\textcolor{UDSgreenFierte}{\faMicrochip} ~\textcolor{black}{IC 2}};
    \node[block] (ic2a) at (5,  -5)
        {\textcolor{UDSgreenFierte}{\faMicrochip} ~\textcolor{black}{IC 2A}};
    \node[block] (2v5)  at (3.33,  -6)
        {\textcolor{UDSgreenFierte}{\faLongArrowAltRight} ~\textcolor{black}{\SI{2.5}{\volt}}};
    \node[block] (ic3)  at (5,  -6)
        {\textcolor{UDSgreenFierte}{\faMicrochip} ~\textcolor{black}{IC 3}};

    \draw[->, ultra thick, color=red]
         ($(inlabel)+(-1.25, 0)$) -- (prot.west)
         node[midway, above]
         {\textcolor{black}{Input $\SI{12}{\volt}$}};

    \draw[->, ultra thick, color=red]
         (prot) -- (step)
         node[midway, above]
         {\textcolor{black}{$\SI{750}{\milli\ampere}$}};
    \draw[->, ultra thick, color=red]
         (prot) |- (5v)
         node[pos=0.75, above]
         {\textcolor{black}{$?\SI{}{\milli\ampere}$}};
    \draw[->, ultra thick, color=red]
         (prot) |- (3v3)
         node[pos=0.75, above]
         {\textcolor{black}{$?\SI{}{\milli\ampere}$}};

    \draw[->, ultra thick, color=magenta]
         (5v) -- (led)
         node[midway, above]
         {\textcolor{black}{$\SI{80}{\milli\ampere}$}};
    \draw[->, ultra thick, color=magenta]
         (5v) |- (usb)
         node[pos=0.79, above]
         {\textcolor{black}{$\SI{500}{\milli\ampere}$}};

    \draw[->, ultra thick, color=blue]
         (3v3) -- (ic1)
         node[midway, above]
         {\textcolor{black}{$\SI{17.5}{\milli\ampere}$}};
    \draw[->, ultra thick, color=blue]
         (3v3) |- (ic2)
         node[pos=0.79, above]
         {\textcolor{black}{$\SI{10}{\milli\ampere}$}};
    \draw[->, ultra thick, color=blue]
         (3v3) |- (3v3a)
         node[pos=0.75, above]
         {\textcolor{black}{$\SI{50}{\milli\ampere}$}};
    \draw[->, ultra thick, color=blue]
         (3v3) |- (2v5)
         node[pos=0.75, above]
         {\textcolor{black}{?$\SI{}{\milli\ampere}$}};

    \draw[->, ultra thick, color=green]
         (3v3a) -- (ic2a)
         node[midway, above]
         {\textcolor{black}{$\SI{50}{\milli\ampere}$}};
    \draw[->, ultra thick, color=orange]
         (2v5)  -- (ic3)
         node[midway, above]
         {\textcolor{black}{$\SI{50}{\milli\ampere}$}};
    \end{tikzpicture}
    }
\end{frame}

\subsection{Séquençage}